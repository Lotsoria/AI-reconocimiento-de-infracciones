include: "app/config/default.yaml"

geometry:
  # Línea de stop (para luz roja)
  stop_line: [[200, 520], [980, 520]]

  # Líneas para medir velocidad (A y B)
  speed_lines:
    A: [[300, 600], [1100, 600]]
    B: [[300, 700], [1100, 700]]

  # Línea central de carril (fallback si no hay lane detector robusto)
  lane_center: [[640, 220], [640, 900]]

  # Polígono que no debe cruzarse (línea continua / carril contrario)
  no_cross_polygon: [[610,180],[670,180],[700,900],[580,900]]

helmet:
  # Frames consecutivos SIN casco necesarios para reportar (más alto = menos falsos positivos)
  min_persistence_no_helmet: 12
  # Frames consecutivos CON casco para limpiar estado activo
  min_persistence_helmet: 3
  # Segundos mínimos entre reportes del mismo ID (evita spam de capturas)
  min_gap_seconds: 3.0
  # Distancia máxima px para asociar persona↔moto (muy grande puede emparejar mal)
  max_person_moto_dist: 120
  # Proporción superior del bbox de persona usada como 'cabeza' (sube si el casco queda más abajo)
  head_roi_top_ratio: 0.45
  # IoU mínimo casco↔cabeza para considerar 'tiene casco' (más bajo = más tolerante)
  helmet_iou_thresh: 0.08
  # Confianza mínima del detector de casco (sube si hay falsos positivos de casco)
  helmet_conf_min: 0.30

lane:
  persistence_frames: 5
